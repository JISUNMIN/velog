Next.js로 프로젝트를 개발하던 중, 예상하지 못한 400 에러가 발생했습니다.  
사용자 데이터를 불러오기 위해 `/api/users`로 요청을 보냈다고 생각했는데, 네트워크 탭을 확인해보니 이상한 경로로 요청이 나가고 있었습니다.

```
GET http://localhost:3000/dashboard/api/users 400 (Bad Request)
```


## ❗ 문제 상황

React Query를 통해 다음과 같이 데이터를 요청했습니다.

```ts
const API_PATH = "api/users";

const useUser = () => {
  return useQuery(["users"], async () => {
    const res = await axios.get(API_PATH);
    return res.data;
  });
};
```

해당 코드는 /api/users로 요청을 보낼 거라고 생각했지만, 실제로는 http://localhost:3000/dashboard/api/users로 요청이 나가며 400 에러가 발생했습니다.

## 🧩 원인

원인은 간단했습니다.
"api/users"처럼 슬래시(/) 없이 시작하는 경로는 상대 경로로 해석되기 때문입니다.
현재 페이지가 /dashboard였다면, 브라우저는 이 경로를 dashboard/api/users로 인식하게 됩니다.

즉, dashboard가 붙어버리는 바람에 존재하지 않는 API 경로로 요청이 나간 것이었습니다.

## ✅ 해결 방법

앞에 슬래시(`/`)를 붙여 **절대 경로**로 변경해주었습니다.

```ts
const API_PATH = "/api/users"; // 절대 경로로 수정
```
수정 후 요청은 의도한 대로 `http://localhost:3000/api/users`로 나갔고, 400 에러도 발생하지 않았습니다.

또한, axios 인스턴스를 생성하여 baseURL을 지정하는 방식도 사용할 수 있습니다. 이렇게 하면 경로 설정을 보다 일관성 있게 관리할 수 있습니다.
```ts
const axiosInstance = axios.create({
  baseURL: "/api",
});

axiosInstance.get("/users"); // → '/api/users'로 요청됨
```
###  1. axios 인스턴스 생성 파일 만들기

src/lib/axios.ts 또는 src/lib/axiosInstance.ts 등으로 생성합니다:

```ts
// src/lib/axios.ts
import axios from "axios";

const axiosInstance = axios.create({
  baseURL: "/api", // 이 경우 '/api/~~'로 자동 prefix 됨
});

export default axiosInstance;
```
### 2. 해당 인스턴스를 훅 등에서 사용
```ts
// src/hooks/react-query/useUser.ts
import { useQuery } from "@tanstack/react-query";
import axios from "@/lib/axios"; // 👈 우리가 만든 인스턴스 import

const useUser = () => {
  return useQuery(["users"], async () => {
    const res = await axios.get("/users"); // '/api/users'로 요청됨
    return res.data;
  });
};

export default useUser;
```

## 🧠 마치며

아무 생각 없이 "api/..." 형태로 경로를 작성했더니 상대 경로로 인식되어 문제가 발생했습니다.
이런 실수를 방지하고자, axios 인스턴스를 별도 파일로 분리하여 baseURL을 지정하고 재사용하는 방식으로 변경했습니다.