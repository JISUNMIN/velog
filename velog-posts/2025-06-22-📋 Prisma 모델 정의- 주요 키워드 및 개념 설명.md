> Prisma 모델은 데이터베이스 테이블을 의미하며, 애플리케이션의 핵심 엔티티를 표현합니다.
각 모델은 실제 DB의 테이블로 매핑되며, 모델 안의 필드는 테이블의 컬럼에 해당합니다.  
오늘은 이 Prisma 모델을 기반으로 한 **기본적인 구조와 관계 설정 방법**에 대해 알아보겠습니다.

## Prisma 모델 주요 속성 정리
```js
model User {
  id      Int      @id @default(autoincrement())
  email   String   @unique
  name    String?
  role    Role     @default(USER)
  posts   Post[]
  profile Profile?
}
```

1. **@id: 기본 키 (Primary Key)**  
   `id Int @id`는 이 필드가 테이블의 기본 키임을 의미합니다.  
   기본 키는 테이블 내에서 각 레코드를 고유하게 식별하는 필드입니다.

2. **@default(autoincrement()): 기본값 및 자동 증가**  
   - `@default`: 데이터가 입력되지 않았을 때 자동으로 채워지는 값을 설정합니다.  
   - `autoincrement()`: 기본 키인 `id`에 자동 증가 기능을 부여합니다.  
   새 레코드가 생성될 때마다 1씩 숫자가 자동 증가하여 부여됩니다.  
   주로 정수형 기본 키에 사용됩니다.

3. **@unique: 유니크 제약 조건**  
   `email String @unique`는 해당 필드가 테이블 내에서 중복될 수 없는 고유한 값임을 나타냅니다.  
   중복된 이메일 값 입력을 데이터베이스가 막아줍니다.

4. **? (Optional 필드, 널 가능)**  
   `name String?`처럼 필드명 뒤에 `?`가 붙으면, 해당 필드는 값이 없어도 됨(Null 허용)을 의미합니다.  
   값이 없을 경우 Prisma Client에서는 `null` 혹은 `undefined`로 취급합니다.

5. **@default(...) — 기본값 지정**  
   `role Role @default(USER)`는 `role` 필드의 기본값이 `USER`임을 뜻합니다.  
   레코드 생성 시 `role` 값을 주지 않으면 자동으로 `USER`가 입력됩니다.

6. **배열 타입 Post[] — 1:N 관계 표현**  
   `posts Post[]`는 한 `User`가 여러 개의 `Post`를 가질 수 있음을 의미합니다.  
   배열 표기(`[]`)는 일대다(1:N) 관계에서 ‘다’ 쪽을 나타냅니다.


---


7. **관계 필드와 @relation 어노테이션**
```js
model Profile {
  id     Int    @id @default(autoincrement())
  bio    String
  user   User   @relation(fields: [userId], references: [id])
  userId Int    @unique
}
```

- `user User @relation(...)`는 Profile이 User와 관계가 있음을 나타냅니다.
- `fields: [userId]`는 Profile 모델 내 외래키 역할을 하는 필드입니다.
- `references: [id]`는 User 모델의 기본 키(id)를 참조한다는 의미입니다.
- `userId Int @unique` → Profile 한 개당 User가 1:1 대응됨(유니크 제약 때문에).

즉, Profile은 `userId`를 통해 User를 가리키고, **User와 Profile은 1:1 관계**입니다.


8. **자동 관리 필드: @updatedAt**
```js
model Post {
  updatedAt  DateTime   @updatedAt
}

```
- `@updatedAt`은 **레코드가 수정될 때마다 자동으로 현재 시간으로 업데이트됩니다.**
- 주로 **‘수정일자’ 필드에 사용합니다.**

9. **날짜 기본값: @default(now())**

```js
model Post {
  createdAt  DateTime   @default(now())
}

```
- 새 레코드가 만들어질 때 **현재 시간을 자동으로 넣습니다.**  
-  보통 **생성일자 필드에 사용합니다.**.


10. **다대다 관계: 배열로 표현**

```js
model Post {
  categories Category[]
}

model Category {
  posts Post[]
}
```
- `Post`와 `Category`가 **다대다 관계임을 의미합니다.**  
 - Prisma가 내부적으로 **중간 테이블(join table)을 자동 생성**해서 연결해줍니다.


11. Enum 타입
```js
enum Role {
  USER
  ADMIN
}
```


- `enum`은 미리 정의된 값들의 집합을 의미합니다.  
이 값들만 해당 필드에 입력할 수 있도록 제한하여, 데이터의 일관성과 안정성을 높입니다.
- `role Role @default(USER)`처럼 **필드 타입으로 지정**할 수 있습니다.


## ✅ 요약 정리

| 키워드 및 문법                                      | 의미                          |
| --------------------------------------------- | --------------------------- |
| `@id`                                         | 기본 키 지정                     |
| `@default(autoincrement())`                   | 자동 증가하는 숫자 (주로 기본 키에 사용)    |
| `@unique`                                     | 중복 불가능한 유니크 제약 조건           |
| `?`                                           | 필드가 optional (null 가능)      |
| `@default(value)`                             | 필드 기본값 지정                   |
| `[]`                                          | 배열 타입, 1\:N 또는 다대다 관계 표현    |
| `@relation(fields: [...], references: [...])` | 관계 연결 필드와 참조 필드 지정 (외래키 역할) |
| `@updatedAt`                                  | 수정될 때 자동으로 현재 시각으로 변경       |
| `@default(now())`                             | 생성 시 현재 시간 자동 할당            |
| `enum`                                        | 제한된 값 집합으로 필드 타입 지정         |


> 참고 - Prisma 공식 문서: [Prisma Data Model - Models](https://www.prisma.io/docs/orm/prisma-schema/data-model/models)
