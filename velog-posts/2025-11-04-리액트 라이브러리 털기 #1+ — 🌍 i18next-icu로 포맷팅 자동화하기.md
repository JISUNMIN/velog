> 이전 글에서는 `react-i18next`와 `useTranslation` 훅을 통해  
> 리액트에서 다국어 번역을 설정하고 사용하는 방법을 살펴봤습니다.
>
> 이번 글에서는 그 확장 버전으로,  
> **언어별 날짜·숫자·통화 포맷까지 자동으로 처리해주는 플러그인 `i18next-icu`**에 대해 알아보겠습니다.

---

## 💡 i18next-icu란?

`i18next-icu`는 **i18next의 기능을 확장하는 플러그인**으로,  
언어별 날짜, 시간, 숫자, 통화, 복수형, 성별 등의 **로케일(언어 문화권) 포맷**을 자동으로 처리해줍니다.

여기서 **ICU**는 *International Components for Unicode*의 약자로,  
전 세계 언어의 날짜·숫자·복수형 규칙 등을 공통된 규칙으로 정의한 국제 표준입니다.  
즉, **i18next-icu**는 이 ICU 포맷 규칙을 활용해  
각 언어별로 다른 표현(예: 1 item / 2 items, ₩15,000 / $15.00)을 자동으로 처리해주는 역할을 합니다.

즉,

> **i18next**가 "번역 데이터(무엇을 보여줄지)"를 담당한다면,  
> **i18next-icu**는 \*그 번역을 “언어별로 어떻게 표현할지(어떻게 보여줄지)”를 담당합니다.

---

## ⚙️ 설치 방법

```bash
npm install i18next-icu
# 또는
yarn add i18next-icu
```

---

## 🧩 등록 방법

i18next 설정 파일(`i18n.ts` 또는 `src/i18n/index.ts`)에 플러그인을 등록합니다.

```ts
import i18n from "i18next";
import ICU from "i18next-icu";
import { initReactI18next } from "react-i18next";

i18n.use(ICU) // ✅ i18next-icu 플러그인 추가
    .use(initReactI18next)
    .init({
        resources,
        lng: "ko",
        interpolation: { escapeValue: false },
    });
```

이렇게 하면 i18next에서 **ICU 포맷 문법**을 사용할 수 있게 됩니다.

---

## 🔁 설치 전 vs 설치 후 비교

###  설치 전 (기본 i18next)

**ko.json**

```json
{
    "price": "가격: {{value}}원",
    "photo": "{{count}}장 사진",
    "photo_plural": "{{count}}장 사진들"
}
```

**React 코드**

```tsx
t("price", { value: 15000 }); // 결과: "가격: 15000원"
t("photo", { count: 1 }); // 결과: "1장 사진"
t("photo", { count: 5 }); // 결과: "5장 사진들"
```

> 포맷팅(숫자, 통화, 날짜 등)을 직접 처리해야 합니다.
> 복수형 문장은 `_plural` 키를 **직접 정의해야** 합니다.
> i18next는 `count > 1`이면 자동으로 `"photo_plural"` 키를 찾아 사용합니다.

---

### ✅ 설치 후 (i18next-icu 사용)

**ko.json**

```json
{
    "price": "가격: {value, number, currency}",
    "today": "오늘은 {date, date, long} 입니다.",
    "photos": "{count, plural, =0 {사진이 없습니다.} one {사진이 1장 있습니다.} other {사진이 #장 있습니다.}}"
}
```

**React 코드**

```tsx
t("price", { value: 15000 }); // 가격: ₩15,000
t("today", { date: new Date() }); // 오늘은 2025년 11월 3일 입니다.
t("photos", { count: 1 }); // 사진이 1장 있습니다.
t("photos", { count: 5 }); // 사진이 5장 있습니다.
```

> 숫자, 날짜, 통화 등은 **로케일에 맞게 자동 포맷**됩니다.
> 복수형(`plural)` 처리를 위해 `_plural` 키를 만들 필요가 없습니다.
> `{count, plural, =0 {...} one {...} other {...}}` 구문을 사용해
> 한 문장 안에서 조건 분기(`=0, one, other`)를 처리할 수 있습니다.

**언어별 포맷 자동 적용**

-   숫자 콤마 추가
-   통화 단위 자동 반영 (₩, $, € 등)
-   날짜 포맷 자동 변환
-   복수형 문법 처리

---

## 💬 ICU 문법 핵심 정리

ICU(MessageFormat) 문법은 **값을 형식화하거나 조건에 따라 다른 문장을 출력할 때** 사용합니다.  
기본 구조는 다음과 같습니다:


>**{변수명, 형식타입, 스타일}**

| 예시                                        | 설명               |
| ------------------------------------------- | ------------------ |
| `{value, number}`                           | 숫자 포맷          |
| `{value, number, currency}`                 | 통화 표시          |
| `{date, date, long}`                        | 날짜 표시          |
| `{count, plural, one {...} other {...}}`    | 복수형 처리        |
| `{gender, select, male {...} female {...}}` | 조건(성별 등) 처리 |

> ⚠️ **주의:**  
> `i18next-ICU`에서는 **`{name}`** 형태의 문법을 사용하지만,  
> **기본 i18next**에서는 **`{{name}}`** 형태를 사용합니다.  
> 두 문법은 파서(Parser)가 다르기 때문에 **혼용하면 작동하지 않습니다.**  
> (ICU 사용 시 `{}` / 기본 i18next 사용 시 `{{}}` 로 구분해야 합니다.)
>
> **예시:**
> ```json
> // ✅ 기본 i18next
> { "greet": "안녕하세요, {{name}}님!" }
>
> // ✅ i18next-ICU
> { "greet": "안녕하세요, {name}님!" }
> ```
>
> ```tsx
> t("greet", { name: "선민" });
> // 두 경우 모두 결과: "안녕하세요, 선민님!"
> ```
> 단, 설정에 따라 파서가 다르므로 `{}`와 `{{}}`는 반드시 구분해야 합니다.

### 요약

-   **`number`, `date`** → 값을 **형식화(Format)**
-   **`plural`, `select`** → 문장을 **분기(Logic)**
-   `{변수명, 형식타입, 스타일}` 형태로 작성
-   언어별 **숫자·날짜·통화 포맷 자동 지역화(Localization)**
-   `plural`에서는 `#` 기호로 변수 값 그대로 출력 가능 (`#` → `count` 값)

---

### 🔍 예시 및 문법 해석

#### 💰 `"price": "가격: {value, number, currency}"`

-   `value` → 변수 이름 (React 코드에서 넘겨주는 key)
-   `number` → **형식 타입(format type)** → 숫자로 처리
-   `currency` → **스타일(style)** → 통화 형식으로 표시

**즉,**  
`"value"` 값을 받아 숫자형으로 인식하고, **통화(currency)** 포맷으로 출력하라.

---

#### 🗓️ `"today": "오늘은 {date, date, long} 입니다."`

-   `date` → 변수 이름 (React 코드에서 넘겨주는 key)
-   첫 번째 `date` → **형식 타입(format type)** → 날짜로 처리
-   `long` → **스타일(style)** → 긴 날짜 형식으로 표시

    **즉,**  
    `"date"` 값을 받아서 날짜 형식(`long`)으로 출력하라.

---

#### 🧮 `"photos": "{count, plural, =0 {사진이 없습니다.} one {사진이 1장 있습니다.} other {사진이 #장 있습니다.}}"`

-   `count` → 전달된 변수 이름
-   `plural` → 복수형 처리 지정
-   `=0`, `one`, `other` → **조건 분기**
    -   `=0` → 정확히 0일 때
    -   `one` → 1개일 때
    -   `other` → 그 외 모든 경우
-   `#` → `count` 값 그대로 출력

**즉,**  
`count` 값에 따라 다른 문장을 표시하며, `#` 기호는 숫자 자체를 출력한다.

---

---

### ⚙️ 무엇을 생략할 수 있을까?

| 형태 | 변수명 | 타입(type) | 스타일(style) | 비고 |
|------|--------|-------------|---------------|------|
| 단순 치환 `{name}` | ✅ 필요 | ❌ 생략 | ❌ 생략 | 그냥 값만 끼워 넣기 |
| 숫자 `{value, number}` | ✅ 필요 | ✅ 필요 | ⭕ 생략 가능 | 스타일 없으면 로케일 기본 숫자 형식 |
| 통화 `{value, number, currency}` | ✅ 필요 | ✅ 필요 | ❌ 필요(=currency) | 통화 스타일을 쓸 땐 이 스타일을 명시해야 해요 |
| 날짜 `{date, date}` | ✅ 필요 | ✅ 필요 | ⭕ 생략 가능 | 스타일 없으면 로케일 기본 날짜 형식(보통 medium 계열) |
| 시간 `{ts, time}` | ✅ 필요 | ✅ 필요 | ⭕ 생략 가능 | short/medium/long/full 지정 가능 |
| 복수형 `{count, plural, ...}` | ✅ 필요 | ✅ 필요 | ✖ 스타일 개념 없음 | `other` 가지는 필수(나머지 분기 생략 가능) |
| 선택 `{g, select, ...}` | ✅ 필요 | ✅ 필요 | ✖ 스타일 개념 없음 | `other` 가지는 필수 |

>  **요약:**  
> - **타입(type)** 은 서식(숫자, 날짜 등)을 적용할 때 필요하며,  
>   **스타일(style)** 은 있으면 세부 형식, 없으면 기본 형식이 적용됩니다.  
> - **`plural` / `select`** 는 타입 자체가 분기 문법이라 **스타일 개념이 없고**,  
>   반드시 **`other` 분기**를 포함해야 합니다.

---

## 💡 언제 써야 하나?

| 상황                                                    | 추천 여부 |
| ------------------------------------------------------- | --------- |
| 단순 UI 텍스트, 버튼 등                                 | ❌ 불필요 |
| 날짜, 통화, 복수형, 성별 등 언어별 표현이 필요한 서비스 | 추천      |
| 글로벌 서비스 (여러 언어와 포맷 지원)                   | 필수      |

---

## 🔁 설치 전/후 기능 비교 요약

| 기능               | i18next 기본                   | i18next + i18next-icu     |
| ------------------ | ------------------------------ | ------------------------- |
| 문자열 치환        | ✅ 지원                        | ✅ 지원                   |
| 복수형 처리        | ⚙️ 직접 `_plural` 키 지정 필요 | ✅ 자동 처리              |
| 날짜/시간 포맷     | ❌ 직접 처리 필요              | ✅ 자동 변환              |
| 숫자/통화 포맷     | ❌ 직접 처리 필요              | ✅ 로케일 기반 자동 포맷  |
| 조건(성별 등) 처리 | ❌ 불가능                      | ✅ `select` 문법으로 지원 |

---

## ✅ 정리하자면

-   `i18next-icu`는 **i18next의 포맷팅 기능을 확장하는 플러그인**입니다.
-   설치 후 `.use(ICU)`로 등록해야 i18n 설정에 반영됩니다.
-   글로벌 서비스나 다국어 포맷이 중요한 환경에서는 필수라고 볼 수 있습니다.
-   단순한 텍스트 번역 중심이라면 **기본 i18next으로도** 괜찮습니다.
