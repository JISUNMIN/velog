PrismaëŠ” í˜„ëŒ€ì ì¸ TypeScript ê¸°ë°˜ ORM(Object-Relational Mapping) ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” **íˆ´ì´ì ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ**, ê°ì²´ì§€í–¥ ì½”ë“œë¡œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‰½ê²Œ ë‹¤ë£° ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤ë‹ˆë‹¤.
SQL ì‘ì„± ì—†ì´ë„ ë°ì´í„°ì— ì ‘ê·¼í•˜ê³  ì¡°ì‘í•  ìˆ˜ ìˆìœ¼ë©°, íƒ€ì… ì•ˆì „ì„±ê³¼ ìë™ì™„ì„± ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.


### â“ íˆ´ê³¼ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ì°¨ì´

| êµ¬ë¶„        | ë¼ì´ë¸ŒëŸ¬ë¦¬                               | íˆ´ (Tool, CLI ë„êµ¬)                       |
| --------- | ----------------------------------- | -------------------------------------- |
| **ëª©ì **    | ì½”ë“œ ë‚´ë¶€ì—ì„œ ê¸°ëŠ¥ì„ **ë¶ˆëŸ¬ì™€ ì‚¬ìš©**              | ì™¸ë¶€ì—ì„œ **ì‘ì—…ì„ ìˆ˜í–‰í•˜ê±°ë‚˜ ìë™í™”**                 |
| **ì˜ˆì‹œ**    | `@prisma/client`, `lodash`, `axios` | `npx prisma migrate`, `git`, `webpack` |
| **ì‚¬ìš© ìœ„ì¹˜** | ì½”ë“œ ì•ˆ (importí•´ì„œ ì‚¬ìš©)                  | í„°ë¯¸ë„ì´ë‚˜ ëª…ë ¹ì–´ í™˜ê²½ì—ì„œ ì‚¬ìš©                      |
| **ê¸°ëŠ¥**    | DB ìš”ì²­, ë°ì´í„° ì²˜ë¦¬ ë“± ëŸ°íƒ€ì„ ë¡œì§              | DB ë§ˆì´ê·¸ë ˆì´ì…˜, ì½”ë“œ ìƒì„±, ì´ˆê¸°í™” ì‘ì—… ë“±             |

>ğŸ’¡ Extendsion ì„¤ì¹˜ ê¶Œì¥
- ì„¤ì¹˜ í•˜ì§€ ì•Šì„ ì‹œ shema.prisma - codeë“¤ì˜ ìƒ‰ì´ í°ìƒ‰ìœ¼ë¡œ ë‚˜ì˜µë‹ˆë‹¤.
![](https://velog.velcdn.com/images/sunmins/post/ae282355-4571-40be-95ca-7b912436b8aa/image.png)




âœ… Prismaì˜ ì£¼ìš” ì¥ì 

| í•­ëª©            | ì„¤ëª…                                          |
| ------------- | ------------------------------------------- |
| **íƒ€ì… ì•ˆì •ì„±**    | DB ëª¨ë¸ ê¸°ë°˜ìœ¼ë¡œ **ìë™ íƒ€ì… ìƒì„±**ë˜ì–´ ì½”ë“œ ì‘ì„± ì¤‘ ì˜¤ë¥˜ ì˜ˆë°©     |
| **ê°„ê²°í•œ ë¬¸ë²•**    | ë©”ì„œë“œ ì²´ì´ë‹ ë°©ì‹ìœ¼ë¡œ **ì§ê´€ì ì¸ ì¿¼ë¦¬ ì‘ì„±** ê°€ëŠ¥              |
| **ìë™ ë§ˆì´ê·¸ë ˆì´ì…˜** | Prisma CLIë¡œ **ìŠ¤í‚¤ë§ˆ ë³€ê²½ â†’ ë§ˆì´ê·¸ë ˆì´ì…˜ ìë™ ìƒì„±**       |
| **í”„ë¡ íŠ¸ì—”ë“œ ì¹œí™”ì ** | Next.js ë“± TypeScript ê¸°ë°˜ í”„ë¡œì íŠ¸ì™€ **ê¶í•©ì´ ë§¤ìš° ì¢‹ìŒ** |
| **ë¹ ë¥¸ ìƒì‚°ì„±**    | Prisma Studioë¥¼ í†µí•´ GUIë¡œ ë°ì´í„° í™•ì¸ ë° ìˆ˜ì • ê°€ëŠ¥       |

âš ï¸ Prismaì˜ ë‹¨ì 

| í•­ëª©               | ì„¤ëª…                                      |
| ---------------- | --------------------------------------- |
| **ë³µì¡í•œ ì¿¼ë¦¬ì— í•œê³„**   | ë³µì¡í•œ join/subqueryëŠ” native SQLë¡œ ì²˜ë¦¬í•´ì•¼ í•¨   |
| **ê´€ê³„ ë§¤í•‘ í‘œí˜„ì˜ ì œì•½** | ì¼ë¶€ ê³ ê¸‰ ê´€ê³„ ì„¤ì •ì€ í‘œí˜„ì´ ë‹¤ì†Œ ì œí•œì ì¼ ìˆ˜ ìˆìŒ           |
| **ëŸ°íƒ€ì„ ì„±ëŠ¥ ì˜¤ë²„í—¤ë“œ**  | ë‚´ë¶€ ì¶”ìƒí™”(abstraction) êµ¬ì¡°ë¡œ ì„±ëŠ¥ ì´ìŠˆ ë°œìƒ ê°€ëŠ¥ (ê·¹ë‹¨ì  ê²½ìš°) |



## ğŸ”§ ê¸°ë³¸ ì‚¬ìš©ë²•
### 1.ì„¤ì¹˜
```

npm install prisma tsx --save-dev
npx prisma init
npm install @prisma/client

prisma init ì‹¤í–‰ ì‹œ prisma/schema.prisma íŒŒì¼ê³¼ .env íŒŒì¼ì´ ìƒì„±ë¨.
```
### 2. ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì„¤ì •
```
.env íŒŒì¼ì—ì„œ DB ì—°ê²° ë¬¸ìì—´ì„ ì„¤ì •í•©ë‹ˆë‹¤.
DATABASE_URL="postgresql://user:password@localhost:5432/mydb"
```
**âœ… DB ë¬¸ìì—´(DATABASE_URL ì°¾ëŠ” ë°©ë²•) supabase ê¸°ì¤€**
>1. https://supabase.com/ ì ‘ì†
2. íšŒì›ê°€ì… ë° ë¡œê·¸ì¸
3. project ìƒì„± 
4. ìƒë‹¨ ìš°ì¸¡ Connect í´ë¦­
5. ORMs í´ë¦­
6. ë³µì‚¬í›„ .envì— ë³µì‚¬
(2025.06.10 ê¸°ì¤€ âŒconntetion stringìœ¼ë¡œ í•˜ë©´ ì—ëŸ¬âŒ)

### 3. ëª¨ë¸ ì •ì˜ (schema.prisma)

ëª¨ë¸ ì •ì˜ì˜ ìì„¸í•œ ë°©ë²•ì€ [ì—¬ê¸°ì„œ](https://velog.io/@sunmins/Prisma-%EB%AA%A8%EB%8D%B8-%EC%A0%95%EC%9D%98-%EC%A3%BC%EC%9A%94-%ED%82%A4%EC%9B%8C%EB%93%9C-%EB%B0%8F-%EA%B0%9C%EB%85%90-%EC%84%A4%EB%AA%85) ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤. 
```
model User {
  id    Int     @id @default(autoincrement())
  name  String
  email String  @unique
  posts Post[]
}

model Post {
  id      Int    @id @default(autoincrement())
  title   String
  content String?
  author  User   @relation(fields: [authorId], references: [id])
  authorId Int
}
```

### 4. ë§ˆì´ê·¸ë ˆì´ì…˜ ì ìš©
```
npx prisma migrate dev --name init
```

DBì— í…Œì´ë¸” ìƒì„±ë¨
ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ ìë™ ìƒì„±ë¨


### 5. Prisma Client ì‚¬ìš© ì˜ˆì‹œ
**PrismaClient: Prismaê°€ ìë™ìœ¼ë¡œ ìƒì„±í•œ DBì ‘ê·¼ ë„êµ¬, SQLì—†ì´ DBë¥¼ ì¡°ì‘í•  ìˆ˜ ìˆê²Œ ë„ì™€ì£¼ëŠ” í•µì‹¬ ê°ì²´**
```js
import { PrismaClient } from '@prisma/client';

const prisma = new PrismaClient();

async function main() {
// create: instert ì¿¼ë¦¬ ì—­í• , í˜„ì¬ postì— ìƒˆë¡œìš´ ë°ì´í„°ë¥¼ ë„£ëŠ” ë©”ì„œë“œ
  const user = await prisma.user.create({
    data: {
      name: 'í™ê¸¸ë™',
      email: 'hong@example.com',
      posts: {
        create: {
          title: 'ì²« ë²ˆì§¸ ê²Œì‹œë¬¼',
        },
      },
    },
  });
// findMany: select ì¿¼ë¦¬ ì—­í• , ë°ì´í„° ì—¬ëŸ¬ ê°œ ì¡°íšŒ, ì¡°ê±´ì„ ë„£ìœ¼ë©´ í•„í„°ë§ë„ ê°€ëŠ¥ 
  const allUsers = await prisma.user.findMany({
  // include: joinì˜ ì—­í• , í˜„ì¬ usserë¥¼ ì°¾ì„ë•Œ ì—°ê´€ëœ postsë„ í•¨ê»˜ ê°€ì ¸ì™€ì¤˜ ë¼ëŠ” ì˜ë¯¸
    include: {
      posts: true,
    },
  });

  console.log(allUsers);
}

// ì‹¤ì œë¡œ ì‹¤í–‰
main();
```




ğŸ–¥ï¸ ì£¼ìš” í„°ë¯¸ë„ ëª…ë ¹ì–´

| ëª…ë ¹ì–´                                  | ì„¤ëª…                             |
| ------------------------------------ | ------------------------------ |
| `npx prisma init`                    | ì´ˆê¸° ì„¤ì • íŒŒì¼ ìƒì„±                    |
| `npx prisma generate`                | Prisma Client ì¬ìƒì„± (ëª¨ë¸ ë³€ê²½ ì‹œ í•„ìš”) |
| `npx prisma migrate dev (--name [ì„¤ëª…])` | ê°œë°œìš© ë§ˆì´ê·¸ë ˆì´ì…˜ ìˆ˜í–‰- prisma ìŠ¤í‚¤ë§ˆ ë³€ê²½-> DBì— ë°˜ì˜   |
| `npx prisma studio`                  | ì›¹ ê¸°ë°˜ GUI(DB ë¸Œë¼ìš°ì €) ì‹¤í–‰           |
| `npx prisma format`                  | schema.prisma íŒŒì¼ í¬ë§· ì •ë¦¬(í¬ë§·íŒ…): ê°€ë…ì„± ì¦ê°€         |
| `npx prisma db pull`                 | ê¸°ì¡´ DBì—ì„œ ìŠ¤í‚¤ë§ˆ ë¶ˆëŸ¬ì˜¤ê¸°- DB ë³€ê²½-> Prisma ìŠ¤í‚¤ë§ˆ ë°˜ì˜ (ë°˜ëŒ€ë¡œ ê°€ì ¸ì˜¤ê¸°)    |
| ` npx prisma migrate reset`                 | ğŸš¨ ê¸°ì¡´ DB ì´ˆê¸°í™”(Shema í¬í•¨ ë°ì´í„° ìœ ì‹¤, ì£¼ì˜í•´ì„œ ì‚¬ìš©)   |


ğŸ—‚ SQL vs Prisma ë¬¸ë²• ë¹„êµ

| ì‘ì—…                                 | SQL                                                                       | Prisma                                                                                       |
| ---------------------------------- | ------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------- |
| âœ… **ë°ì´í„° ìƒì„± (INSERT)**              | `INSERT INTO users (name, email) VALUES ('í™ê¸¸ë™', 'hong@example.com');`     | `await prisma.user.create({ data: { name: 'í™ê¸¸ë™', email: 'hong@example.com' } });`            |
| ğŸ” **ì „ì²´ ì¡°íšŒ (SELECT all)**          | `SELECT * FROM users;`                                                    | `await prisma.user.findMany();`                                                              |
| ğŸ” **ì¡°ê±´ ì¡°íšŒ (SELECT with WHERE)**   | `SELECT * FROM users WHERE email = 'hong@example.com';`                   | `await prisma.user.findMany({ where: { email: 'hong@example.com' } });`                      |
| âœï¸ **ìˆ˜ì • (UPDATE)**                 | `UPDATE users SET name = 'ê¹€ì² ìˆ˜' WHERE id = 1;`                             | `await prisma.user.update({ where: { id: 1 }, data: { name: 'ê¹€ì² ìˆ˜' } });`                     |
| âŒ **ì‚­ì œ (DELETE)**                  | `DELETE FROM users WHERE id = 1;`                                         | `await prisma.user.delete({ where: { id: 1 } });`                                            |
| ğŸ”— **ì¡°ì¸ í¬í•¨ ì¡°íšŒ (JOIN)**             | `SELECT * FROM users u JOIN posts p ON u.id = p.user_id;`                 | `await prisma.user.findMany({ include: { posts: true } });`                                  |
| ğŸ§µ **ê´€ê³„ í¬í•¨ ìƒì„± (userì™€ post í•¨ê»˜ ìƒì„±)** | `INSERT INTO users ...; INSERT INTO posts (user_id, title) VALUES (...);` | `await prisma.user.create({ data: { name: '', posts: { create: { title: '' } } } });`        |
| ğŸ”„ **Upsert (ìˆìœ¼ë©´ ìˆ˜ì •, ì—†ìœ¼ë©´ ìƒì„±)**     | (SQLì€ ë³µì¡í•œ ì¡°ê±´ë¬¸ í•„ìš”)                                                         | `await prisma.user.upsert({ where: { email }, update: { name }, create: { email, name } });` |


ğŸ“¦ Prisma ì£¼ìš” ë©”ì„œë“œ ì •ë¦¬
ğŸ”¹ Create (ë°ì´í„° ìƒì„±)

| ë©”ì„œë“œ            | ì„¤ëª…             |
| -------------- | -------------- |
| `create()`     | ë‹¨ì¼ ë ˆì½”ë“œ ìƒì„±      |
| `createMany()` | ì—¬ëŸ¬ ë ˆì½”ë“œ í•œ ë²ˆì— ìƒì„± |

ğŸ” Read (ë°ì´í„° ì¡°íšŒ)

| ë©”ì„œë“œ            | ì„¤ëª…                                          |
| -------------- | ------------------------------------------- |
| `findUnique()` | ê³ ìœ  ì¡°ê±´ìœ¼ë¡œ ë‹¨ì¼ ë ˆì½”ë“œ ì¡°íšŒ (e.g. `id`)               |
| `findFirst()`  | ì¡°ê±´ì— ë§ëŠ” ì²« ë²ˆì§¸ ë ˆì½”ë“œ ì¡°íšŒ                          |
| `findMany()`   | ì—¬ëŸ¬ ë ˆì½”ë“œ ì¡°íšŒ                                   |
| `count()`      | ì¡°ê±´ì— ë§ëŠ” ë ˆì½”ë“œ ìˆ˜ ë°˜í™˜                             |
| `aggregate()`  | `sum`, `avg`, `max`, `min`, `count` ë“± ì§‘ê³„ í•¨ìˆ˜ |
| `groupBy()`    | í•„ë“œ ê¸°ì¤€ìœ¼ë¡œ ê·¸ë£¹í™”í•˜ì—¬ í†µê³„ ê³„ì‚°                         |

âœï¸ Update (ë°ì´í„° ìˆ˜ì •)

| ë©”ì„œë“œ            | ì„¤ëª…               |
| -------------- | ---------------- |
| `update()`     | ë‹¨ì¼ ë ˆì½”ë“œ ìˆ˜ì •        |
| `updateMany()` | ì¡°ê±´ì— ë§ëŠ” ì—¬ëŸ¬ ë ˆì½”ë“œ ìˆ˜ì • |

ğŸ” Upsert (ì¡°ê±´ë¶€ ì‚½ì… or ìˆ˜ì •)

| ë©”ì„œë“œ        | ì„¤ëª…                         |
| ---------- | -------------------------- |
| `upsert()` | ì¡´ì¬í•˜ë©´ update, ì—†ìœ¼ë©´ create ìˆ˜í–‰ |

ğŸ’¡ ê¸°íƒ€ ìœ ìš©í•œ ê¸°ëŠ¥

| ë©”ì„œë“œ        | ì„¤ëª…                    |
| ---------- | --------------------- |
| `include`  | ê´€ê³„ í…Œì´ë¸” ê°™ì´ ì¡°íšŒí•  ë•Œ ì‚¬ìš©    |
| `select`   | í•„ìš”í•œ í•„ë“œë§Œ ì„ íƒí•´ì„œ ì¡°íšŒí•  ë•Œ ì‚¬ìš© |
| `orderBy`  | ì •ë ¬                    |
| `where`    | ì¡°ê±´ ì§€ì •                 |
| `distinct` | ì¤‘ë³µ ì œê±°                 |
