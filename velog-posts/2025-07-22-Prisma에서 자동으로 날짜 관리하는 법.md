대부분의 웹 애플리케이션에서는 데이터가 언제 생성되고 수정되었는지를 기록해야 합니다. 이때 자주 사용되는 필드가 `createdAt`, `updatedAt`입니다.  
이 글에서는 이 필드를 왜 써야 하는지, Prisma에서는 어떻게 자동으로 관리되는지, 그리고 프론트엔드에서 이를 어떻게 활용할 수 있는지 정리해보았습니다.

---

## ✅ `createdAt`, `updatedAt`를 쓰는 이유?

**데이터의 이력 관리**를 위해서입니다.

- `createdAt`: 해당 데이터가 처음 생성된 시점
- `updatedAt`: 마지막으로 수정된 시점

예를 들어 댓글 시스템이 있을 때, 
- 사용자가 댓글을 작성했을 때 `createdAt`으로 작성 시간을 저장했습니다.  
- 사용자가 댓글을 수정하면 `updatedAt`이 갱신되어 마지막 수정 시점을 알 수 있게 했습니다.

이 두 값은 데이터 변경 히스토리를 추적하거나 UI에서 상대 시간을 보여줄 때 사용 했습니다.

## 🛠️ Prisma에서 자동으로 설정하는 방법

Prisma에서는 아래와 같이 `@default`와 `@updatedAt`을 사용해 쉽게 처리할 수 있습니다:

```ts

model Comment {
  id              Int    @id @default(autoincrement())
  comment         String
  userId          Int
  taskId          Int
  parentCommentId Int? // 부모 댓글 ID (nullable)

  createdAt DateTime @default(now()) // 생성 시 자동 설정
  updatedAt DateTime @updatedAt // 수정 시 자동 업데이트

  parentComment Comment?  @relation("CommentToReplies", fields: [parentCommentId], references: [id], onDelete: Cascade)
  replies       Comment[] @relation("CommentToReplies")

  user User @relation(fields: [userId], references: [id])
  task Task @relation(fields: [taskId], references: [id], onDelete: Cascade)
}

```
- @default(now()): 생성 시 자동으로 현재 시간을 설정
- @updatedAt: 레코드가 업데이트될 때 Prisma가 자동으로 갱신

## 📊 정렬/필터링에도 활용 가능
이력 정보는 단순히 UI 표시 외에도 아래와 같이 실질적인 정렬/필터링에 활용됩니다.

- 최근 작성된 순으로 정렬 (orderBy: { createdAt: "desc" })
- 최근에 수정된 항목만 필터링 (where: { updatedAt: { gte: someDate } })
- 하루 안에 작성된 데이터 필터링 등

즉, 단순히 표시 용도가 아니라 쿼리 조건에도 널리 쓰입니다.

> gte는 "greater than or equal to", 즉 **"크거나 같다"**를 의미하는 비교 연산자입니다.

## 🧾 프론트에서의 활용 방식
프론트엔드에서는 createdAt, updatedAt 값을 활용해 3초 전, 2일 전과 같은 상대 시간을 UI에 표시할 수 있었습니다.
관련 구현은 다음 글에서 확인할 수 있습니다:

👉 참고: [~일 전, ~시간 전 표시하기](https://velog.io/@sunmins/%ED%95%9C%EA%B8%80-%EC%83%81%EB%8C%80-%EC%8B%9C%EA%B0%84-%ED%91%9C%EC%8B%9C%ED%95%98%EA%B8%B0-%EC%9D%BC-%EC%A0%84-%EC%8B%9C%EA%B0%84-%EC%A0%84-%EA%B5%AC%ED%98%84%EA%B8%B0)