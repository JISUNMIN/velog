í”„ë¡œì íŠ¸ ìˆœì„œ(order)ë¥¼ ë³€ê²½í•˜ëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ë‹¤ê°€
ì²˜ìŒì—ëŠ” findManyë¡œ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì„œ ì²˜ë¦¬í•´ì•¼ í•˜ë‚˜ ìƒê°í–ˆì§€ë§Œ,
findManyëŠ” í•œ ë°ì´í„°ë¥¼ ì—¬ëŸ¬ ê³³ì— ë„£ì–´ì£¼ëŠ” ì—­í• ì¼ ë¿, ì—¬ëŸ¬ ë°ì´í„°ë¥¼ ì—¬ëŸ¬ ê³³ì— ë™ì‹œì— ì—…ë°ì´íŠ¸í•˜ëŠ” ê¸°ëŠ¥ì€ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì„ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

ì´í›„ Prismaì˜ ì—…ë°ì´íŠ¸ ë°©ì‹ê³¼ ë¹„ë™ê¸° ì²˜ë¦¬ ê°œë…ì„ ë°°ìš°ë©´ì„œ
ì •í™•í•˜ê³  ì˜¬ë°”ë¥¸ ë°©ë²•ìœ¼ë¡œ êµ¬í˜„í•˜ëŠ” ê³¼ì •ì„ ì •ë¦¬í–ˆìŠµë‹ˆë‹¤.

---

## 1. Promiseì™€ Promise.all ê¸°ë³¸ ê°œë…

### Promiseë€?

- PromiseëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ë¹„ë™ê¸° ì‘ì—…ì˜ ì™„ë£Œ ë˜ëŠ” ì‹¤íŒ¨ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ê°ì²´ì…ë‹ˆë‹¤.  
- ë¹„ë™ê¸° ì‘ì—…ì´ ëë‚˜ë©´ ì„±ê³µ(`fulfilled`)í•˜ê±°ë‚˜ ì‹¤íŒ¨(`rejected`) ìƒíƒœê°€ ë©ë‹ˆë‹¤.

### Prismaì˜ `update` ë©”ì„œë“œì™€ Promise

- `prisma.project.update()` í˜¸ì¶œ ì‹œ, ë°ì´í„°ë² ì´ìŠ¤ ì‘ì—…ì´ ì™„ë£Œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ëŠ” **Promise ê°ì²´ë¥¼ ë°˜í™˜**í•©ë‹ˆë‹¤.  
- ì´ PromiseëŠ” ì‘ì—…ì´ ì„±ê³µí•˜ë©´ ì—…ë°ì´íŠ¸ëœ í”„ë¡œì íŠ¸ ë°ì´í„°ë¥¼ ê²°ê³¼ë¡œ ì œê³µí•©ë‹ˆë‹¤.

```ts
const updatePromise = prisma.project.update({
  where: { id: 1 },
  data: { order: 0 },
});
// updatePromiseëŠ” Promise ê°ì²´
```

### Promise.allì´ë€?
ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ë‚´ì¥ í•¨ìˆ˜(ES6) ì…ë‹ˆë‹¤.
ì—¬ëŸ¬ Promiseë¥¼ ë°°ì—´ë¡œ ë¬¶ì–´ í•œêº¼ë²ˆì— ì‹¤í–‰í•˜ê³ ,ëª¨ë“  ì‘ì—…ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦½ë‹ˆë‹¤.
ëª¨ë“  Promiseê°€ ì™„ë£Œë˜ë©´, ê°ê°ì˜ ê²°ê³¼ê°’ì„ ë°°ì—´ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤

```ts
const promises = [
  prisma.project.update({ where: { id: 1 }, data: { order: 0 } }),
  prisma.project.update({ where: { id: 2 }, data: { order: 1 } }),
];

const results = await Promise.all(promises); // ëª¨ë“  ì—…ë°ì´íŠ¸ ì™„ë£Œ í›„ ê²°ê³¼ ë°°ì—´ ë°˜í™˜
```

## 2. ìˆœì„œ(order) ë³€ê²½ ì‹œ Promise.allì„ ì¨ì•¼ í•˜ëŠ” ì´ìœ 

í”„ë¡œì íŠ¸ 3ê°œê°€ ìˆë‹¤ê³  ê°€ì •í•  ë•Œ, ê°ê° ë‹¤ë¥¸ ìˆœì„œ ê°’(0, 1, 2)ì„ ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.  
í•˜ì§€ë§Œ `updateMany` ë©”ì„œë“œëŠ” ì—¬ëŸ¬ í–‰ì— **ê°™ì€ ë°ì´í„°ë§Œ** ì¼ê´„ ì ìš©í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì—  
**ê° í–‰ë§ˆë‹¤ ë‹¤ë¥¸ `order` ê°’ì„ ì ìš©í•˜ëŠ” ë° ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.**

ê·¸ë˜ì„œ ê° í”„ë¡œì íŠ¸ì— ëŒ€í•´ **ê°œë³„ì ìœ¼ë¡œ `update`ë¥¼ í˜¸ì¶œ**í•´ì•¼ í•˜ë©°,  
ê°ê° `prisma.project.update()`ê°€ ë°˜í™˜í•˜ëŠ” **Promise**ë¥¼ ë°°ì—´ë¡œ ëª¨ì•„  
`Promise.all`ë¡œ ë³‘ë ¬ ì‹¤í–‰í•˜ì—¬ íš¨ìœ¨ì ì´ê³  ë¹ ë¥´ê²Œ ì²˜ë¦¬í•©ë‹ˆë‹¤.

```ts
const updatePromises = projectIds.map((id, index) =>
  prisma.project.update({
    where: { id },
    data: { order: index },
  })
);

await Promise.all(updatePromises); // ëª¨ë“  ìˆœì„œ ì—…ë°ì´íŠ¸ ì™„ë£Œ ëŒ€ê¸°
```

## 3. Prisma updateManyì™€ update ì°¨ì´

| ë©”ì„œë“œ          | ì‚¬ìš© ëª©ì                   | ì œí•œ ì‚¬í•­                      |
| ------------ | ---------------------- | -------------------------- |
| `updateMany` | ì—¬ëŸ¬ í–‰ì— **ê°™ì€ ë°ì´í„°** ì¼ê´„ ì ìš© | ê° í–‰ë§ˆë‹¤ **ë‹¤ë¥¸ ë°ì´í„°**ë¥¼ ì ìš©í•  ìˆ˜ ì—†ìŒ |
| `update`     | íŠ¹ì • í–‰ 1ê°œë¥¼ ì—…ë°ì´íŠ¸          | ì—¬ëŸ¬ ê°œ ì—…ë°ì´íŠ¸ ì‹œ, ê°œë³„ í˜¸ì¶œ í•„ìš”      |

## 4. ì‹¤ì œ API êµ¬í˜„ ì½”ë“œ 
```ts
import { NextRequest, NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";

export async function PATCH(req: NextRequest) {
  try {
    const { projectIds }: { projectIds: number[] } = await req.json();

    const updatePromises = projectIds.map((id, index) =>
      prisma.project.update({
        where: { id },
        data: { order: index },
      })
    );

    await Promise.all(updatePromises);

    return NextResponse.json({ message: "í”„ë¡œì íŠ¸ ìˆœì„œ ë³€ê²½ ì„±ê³µ" });
  } catch (error) {
    return NextResponse.json(
      { error: "ìˆœì„œ ë³€ê²½ ì‹¤íŒ¨", detail: String(error) },
      { status: 500 }
    );
  }
}

```

## ğŸ“Œ ìš”ì•½

- í”„ë¡œì íŠ¸ ìˆœì„œ ë³€ê²½ ì‹œ, updateManyëŠ” ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
- Promise.allê³¼ updateë¥¼ ì¡°í•©í•˜ì—¬ ê° í”„ë¡œì íŠ¸ì˜ orderë¥¼ ê°œë³„ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•´ì•¼ í•©ë‹ˆë‹¤.
- Promise.allì€ ì—¬ëŸ¬ ë¹„ë™ê¸° ì‘ì—…ì„ ë³‘ë ¬ë¡œ ì‹¤í–‰í•˜ê³ , ëª¨ë‘ ì™„ë£Œë˜ì—ˆì„ ë•Œ ê²°ê³¼ë¥¼ ë°°ì—´ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤.


