# 🤔 
새로 입사한 회사에서 사용하는 **UI 컴포넌트 라이브러리**(버튼, 인풋 등을 정의해두고 `npm`으로 설치해 사용하는 사내 공용 UI 패키지)를 살펴보던 중, `Button` 컴포넌트를 클릭했을 때 **색상이 원래대로 돌아오지 않는 현상**을 발견했습니다.

---

## 💥  문제 현상

버튼을 클릭했을 때 색상이 변경되었지만,  
클릭이 끝난 후에도 원래 색상으로 복귀하지 않아 **버튼이 계속 눌려 있는 것처럼 보이는 문제**가 있었습니다.  
이로 인해 버튼의 **상태 피드백이 자연스럽지 않아 시각적으로 어색하게 느껴졌습니다.**

클릭 전  
![](https://velog.velcdn.com/images/sunmins/post/4832caee-07a1-4617-b880-5249811087ce/image.png)

클릭 후
![](https://velog.velcdn.com/images/sunmins/post/d7fe892f-c4a2-4d17-9d21-572f96c5c3c3/image.png)




---

## 🔍 원인 분석

버튼의 스타일 코드를 확인한 결과, 다음과 같은 정의가 되어 있었습니다.

```scss
&:hover,
&:focus {
  background-color: $pui-primary-hover;
  border-color: $pui-primary-hover;
  color: $pui-white;
  fill: $pui-white;
}
```

이 코드에서 문제의 원인은 **`:focus` 선택자**에 있었습니다.  
`button` 요소는 클릭 시 자동으로 **focus 상태가 유지**되기 때문에,  
마우스로 클릭했을 때도 `focus` 스타일이 적용된 채로 남게 되었습니다.  
즉, 클릭이 끝난 뒤에도 버튼은 여전히 `focus` 상태였고,  
이 상태에서 `hover`와 동일한 색상 스타일이 적용되어 있었기 때문에  
결과적으로 **색상이 원래대로 복귀하지 않는 현상**이 발생했습니다.

- `:hover`는 마우스가 올라갔을 때 적용
- `:focus`는 클릭 이후에도 지속  

---

## ✅ 해결 방법

`:focus` 대신 **[focus-visible](https://developer.mozilla.org/en-US/docs/Web/CSS/:focus-visible)** 선택자를 사용하도록 수정했습니다.

```scss
&:hover,
&:focus-visible {
  background-color: $pui-primary-hover;
  border-color: $pui-primary-hover;
  color: $pui-white;
  fill: $pui-white;
}
```

`:focus-visible`은 **키보드(Tab)** 를 이용해 요소에 접근했을 때만 적용되며, 마우스로 클릭할 때는 적용되지 않습니다.  
이렇게 변경한 결과, 클릭 후 색상이 자연스럽게 원래대로 복귀했고,  
**키보드 탐색 시의 접근성(Accessibility)** 도 함께 유지되었습니다.

---

## 🔹 `:focus` vs `:focus-visible`의 실제 사용 구분

| 구분  | 보통 사용하는 요소 | 이유 / 상황 |
|------|------------------|--------------|
| **`:focus`** | `input`, `textarea`, `select`, `radio`, `checkbox` 등 **폼 입력 요소들** | 사용자가 입력 중임을 시각적으로 즉시 보여줘야 했습니다. 마우스로 클릭해서 포커스돼도 시각적 표시가 필요했습니다. |
| **`:focus-visible`** | `button`, `a(link)`, `div`나 **custom component** 등 **조작 요소(액션 요소)** | 키보드로 탐색할 때만 포커스 표시가 필요했습니다. 마우스 클릭 시엔 불필요한 “파란 테두리”를 감추고 깔끔한 UI를 유지했습니다. |

---

## 💡 적용 기준

### 💠 입력 요소 (Input류)

마우스로 클릭해 활성화했을 때도 사용자가 **“현재 이 필드에 입력 중”** 이라는 것을  
명확하게 인식할 수 있어야 합니다.  
따라서 이 경우에는 **`:focus`** 를 사용하는 것이 자연스럽습니다.  

만약 `:focus-visible`을 사용한다면 마우스로 클릭했을 때 포커스 표시가 사라지기 때문에,  
사용자 입장에서는 입력할 준비가 되었는지 직관적으로 파악하기 어려워집니다

### 💠 버튼·링크 등 조작 요소 (Button, Link 등)

버튼이나 링크의 경우, 마우스로 클릭한 뒤 포커스 테두리가 남아 있으면  
시각적으로 어색하고 불필요한 상태처럼 보일 수 있습니다.  
그러나 키보드로 조작하는 사용자는 **탭(Tab)** 키로 이동할 때  
포커스가 명확히 표시되어야 접근성이 보장됩니다.  

이런 이유로, 버튼과 링크 같은 조작 요소에는  
**`:focus-visible`** 을 사용하는 것이 적절합니다.

---

| 요소 타입 | 추천 선택자 | 이유 |
|------------|--------------|------|
| **`input`, `textarea`, `select`** | `:focus` | 마우스로 클릭했을 때도 포커스 표시를 유지해야 입력 중임을 명확히 알 수 있습니다. |
| **`button`, `a`, `div`로 만든 custom control** | `:focus-visible` | 키보드 탐색 시에만 포커스를 표시하고, 마우스 클릭 시에는 숨겨 깔끔한 UI를 유지합니다. |
| **공용 패턴 (접근성 + 깔끔한 UI)** | `:focus { outline: none; }` + `:focus-visible { outline: 2px solid ...; }` | 시각적 노이즈를 줄이면서 접근성을 보장합니다. |

---

## 🧾 결론

버튼 클릭 후 색상이 돌아오지 않았던 이유는  
`:focus`가 마우스 클릭에도 적용되어 스타일이 계속 유지되었기 때문이었습니다.  

이를 **`:focus-visible`** 로 교체함으로써  

- 클릭 시 색상이 자연스럽게 복귀하고,  
- 키보드 탐색 시에는 포커스 표시가 유지되는  

**자연스러운 UI를 유지하면서 접근성도 개선**할 수 있었습니다.
